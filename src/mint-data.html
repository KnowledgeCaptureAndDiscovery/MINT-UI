<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="mint-ajax.html">

<dom-module id="mint-data">

  <template>

    <style include="mint-common-styles">

      .item {
        display: block;
        text-decoration: none;
        text-align: center;
        margin-bottom: 40px;
      }

      h2 {
        font-size: 1.3em;
        font-weight: 500;
        margin: 32px 0;
      }

      .detail {
        margin: 10px;
        margin-top: 0px;
        width: calc(100% - 20px);
        transition: opacity 0.4s;
        @apply(--layout-center-justified);
      }

      .grid {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-center);
        display: flex;
        flex-flow: row wrap;
        border: 1px solid #E3E3E3;
        border-width: 1px 0px 0px 1px;
      }

      .grid > a {
        -webkit-flex: 1 1;
        flex: 1 1;
        -webkit-flex-basis: calc(33.3333% - 11px);
        flex-basis: calc(33.3333% - 11px);
        max-width: calc(33.3333% - 11px);
        padding-left: 10px;
        height: 34px;
        line-height:34px;
        /*color: black;*/
        text-decoration: none;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        border: 1px solid #E3E3E3;
        border-width: 0px 1px 1px 0px;
      }

      .grid > a:hover {
        background-color: #EEEEEE;
        text-decoration: underline;
      }

      .section {
        /*border: 1px solid #E3E3E3;*/
        margin-bottom: 15px;
      }

      .section .content {

      }

      .section .head {
        color: var(--app-secondary-color);
        font-size: 12px;
        height: 42px;
        line-height:42px;
        font-weight: 500;
        padding: 0px 10px;
        border: 1px solid #E3E3E3;
        border-width: 1px 1px 0px 1px;
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06), 0 2px 0 rgba(0, 0, 0, 0.075), 0 3px 0 rgba(0, 0, 0, 0.05), 0 4px 0 rgba(0, 0, 0, 0.015);
      }

      .section .upload {
        padding-top: 10px;
        border: 1px solid #E3E3E3;
        border-width: 0px 1px 0px 1px;
      }


      file-upload {
        padding:5px;

        --file-upload-upload-border: {
          padding: 0px;
          border-color: #D3D3D3;
          color: rgba(0, 0, 0, 0.54);
          margin-bottom:8px;
        };
        --file-upload-upload-border-hover: {
          background-color: #EEEEEE;
        };
        --file-upload-drop-area: {
          padding: 8px;
          width: 200px;
        };
        --file-upload-button: {
          margin-bottom: 0px;
          /*background-color: var(--app-primary-color);
          color: white;*/
        };
        --file-upload-file: {
          padding: 4px;
          width: 200px;
        }
      }

      file-upload iron-icon {
        height: 16px;
      }

      @media (max-width: 767px) {
        h2 {
          margin: 24px 0;
        }

        .grid a {
          -webkit-flex-basis: calc(50% - 11px);
          flex-basis: calc(50% - 11px);
          max-width: calc(50% - 11px);
        }

      }

    </style>

  </template>

  <script>

    Polymer({

      is: 'mint-data',

      properties: {
        server: String,
        userid: {
          type: String,
          observer: '_checkLogin'
        },
        domain: String,
        dataItems: Object
      },

      _computeLoggedInStatus: function(userid) {
        return userid != null;
      },

      _isDefined: function(item) {
        return item != null;
      },

      _hashKeys: function(hash) {
        if(hash)
          return Object.keys(hash).sort();
      },

      _checkLogin: function(userid) {
        if(!userid)
          this.dataItems = null;
      }
    });

  </script>

</dom-module>
